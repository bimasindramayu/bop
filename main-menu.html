<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Utama - Sistem Kemenag</title>
    <link rel="icon" type="image/png" href="assets/coin.png">
    <link rel="stylesheet" href="style/menu-styles.css">
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Main Container -->
    <div class="main-wrapper">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo-section">
                        <img src="assets/coin.png" alt="Logo" class="header-logo" onerror="this.style.display='none'">
                        <div class="header-text">
                            <h1>Sistem Informasi Kemenag</h1>
                            <p>Kabupaten Indramayu</p>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="user-profile">
                        <div class="user-avatar">
                            <span id="userInitials"></span>
                        </div>
                        <div class="user-details">
                            <strong id="userName"></strong>
                            <small id="userRole"></small>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Welcome Section -->
                <div class="welcome-section">
                    <div class="welcome-content">
                        <h2 class="welcome-title">Selamat Datang! ğŸ‘‹</h2>
                        <p class="welcome-subtitle">Pilih menu di bawah untuk mengakses sistem</p>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="showPasswordModal()">
                            <span class="quick-icon">ğŸ”‘</span>
                            <span>Ubah Password</span>
                        </button>
                        <button class="quick-btn logout-btn" onclick="logout()">
                            <span class="quick-icon">ğŸšª</span>
                            <span>Keluar</span>
                        </button>
                    </div>
                </div>

                <!-- Menu Grid -->
                <div class="menu-grid">
                    <!-- BOP Management -->
                    <div class="menu-card bop" onclick="navigateToModule('bop-dashboard.html')">
                        <div class="card-icon-wrapper">
                            <div class="card-icon">ğŸ’°</div>
                        </div>
                        <div class="card-content">
                            <h3>BOP Management</h3>
                            <p>Kelola Budget, RPD, dan Realisasi anggaran operasional</p>
                        </div>
                        <div class="card-arrow">â†’</div>
                    </div>

                    <!-- BMN Management -->
                    <div class="menu-card bmn" onclick="navigateToModule('bmn-dashboard.html')">
                        <div class="card-icon-wrapper">
                            <div class="card-icon">ğŸ“¦</div>
                        </div>
                        <div class="card-content">
                            <h3>BMN Management</h3>
                            <p>Kelola inventaris Barang Milik Negara</p>
                        </div>
                        <div class="card-arrow">â†’</div>
                    </div>

                    <!-- Data Pernikahan -->
                    <div class="menu-card nikah" onclick="navigateToModule('nikah-dashboard.html')">
                        <div class="card-icon-wrapper">
                            <div class="card-icon">ğŸ’</div>
                        </div>
                        <div class="card-content">
                            <h3>Data Pernikahan</h3>
                            <p>Pendataan peristiwa nikah di seluruh KUA</p>
                        </div>
                        <div class="card-arrow">â†’</div>
                    </div>

                    <!-- Kelola Info KUA (Admin Only) -->
                    <div class="menu-card kua" id="menuKelolInfoKUA" style="display: none;" onclick="navigateToModule('nikah-dashboard.html?action=kuainfo')">
                        <div class="card-icon-wrapper">
                            <div class="card-icon">ğŸ“‹</div>
                        </div>
                        <div class="card-content">
                            <h3>Kelola Info KUA</h3>
                            <p>Update informasi Kepala KUA dan NIP</p>
                        </div>
                        <div class="card-arrow">â†’</div>
                    </div>

                    <!-- Kelola Pengguna (Admin Only) -->
                    <div class="menu-card users" id="menuPengguna" style="display: none;" onclick="navigateToModule('user-management.html')">
                        <div class="card-icon-wrapper">
                            <div class="card-icon">ğŸ‘¥</div>
                        </div>
                        <div class="card-content">
                            <h3>Kelola Pengguna</h3>
                            <p>Manajemen user dan kontrol akses sistem</p>
                        </div>
                        <div class="card-arrow">â†’</div>
                    </div>
                </div>

                <!-- Info Cards -->
                <div class="info-section">
                    <div class="info-card">
                        <div class="info-icon">â„¹ï¸</div>
                        <div class="info-content">
                            <h4>Bantuan & Dukungan</h4>
                            <p>Jika mengalami kendala, hubungi administrator sistem</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2026 Kementerian Agama Kabupaten Indramayu</p>
                <p class="footer-version">v1.0.0</p>
            </div>
        </footer>
    </div>

    <!-- Password Change Modal -->
    <div class="modal" id="changePasswordModal">
        <div class="modal-content password-modal">
            <div class="modal-header">
                <div class="modal-icon">ğŸ”</div>
                <h3>Ubah Password</h3>
                <p class="modal-subtitle">Pastikan password baru Anda kuat dan mudah diingat</p>
                <button class="close-btn" onclick="closePasswordModal()">&times;</button>
            </div>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label for="oldPassword">
                        <span class="label-icon">ğŸ”‘</span>
                        Password Lama
                    </label>
                    <div class="password-input-group">
                        <input type="password" id="oldPassword" placeholder="Masukkan password lama" required autocomplete="current-password">
                        <button type="button" class="password-toggle" onclick="togglePassword('oldPassword')">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="newPassword">
                        <span class="label-icon">ğŸ”’</span>
                        Password Baru
                    </label>
                    <div class="password-input-group">
                        <input type="password" id="newPassword" placeholder="Minimal 6 karakter" required minlength="6" autocomplete="new-password">
                        <button type="button" class="password-toggle" onclick="togglePassword('newPassword')">ğŸ‘ï¸</button>
                    </div>
                    <small class="form-hint">Password minimal 6 karakter</small>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">
                        <span class="label-icon">âœ“</span>
                        Konfirmasi Password Baru
                    </label>
                    <div class="password-input-group">
                        <input type="password" id="confirmPassword" placeholder="Ketik ulang password baru" required minlength="6" autocomplete="new-password">
                        <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closePasswordModal()">Batal</button>
                    <button type="submit" class="btn btn-primary">
                        <span>ğŸ’¾</span> Simpan Password
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Load Config & Scripts -->
    <script src="js/config.js"></script>
    <script src="js/main-script.js"></script>
    
    <script>
        function navigateToModule(url) {
            window.location.href = url;
        }
        
        // Set user initials in avatar
        window.addEventListener('DOMContentLoaded', function() {
            const user = SessionManager.getCurrentUser();
            if (user && user.name) {
                const initials = user.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
                const initialsEl = document.getElementById('userInitials');
                if (initialsEl) {
                    initialsEl.textContent = initials;
                }
            }
        });
    </script>
</body>
</html>